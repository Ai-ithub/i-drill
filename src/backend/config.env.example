# ===== IMPORTANT SECURITY NOTE =====
# This is a template file. Copy this to .env and set secure values.
# NEVER commit .env files to version control!
# Generate SECRET_KEY using: python scripts/generate_secret_key.py

# ===== Environment =====
# Set to 'production' for production deployments
APP_ENV=development

# ===== Database Configuration =====
# Format: postgresql://username:password@host:port/database
# IMPORTANT: Use strong passwords in production!
DATABASE_URL=postgresql://CHANGE_USERNAME:CHANGE_PASSWORD@localhost:5432/drilling_db

# ===== Kafka Configuration =====
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_SENSOR_TOPIC=rig.sensor.stream
KAFKA_GROUP_ID=api-consumer-group
# Optional: Kafka authentication (if enabled)
# KAFKA_USERNAME=
# KAFKA_PASSWORD=

# ===== Redis Configuration =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# Optional: Redis password (if enabled)
# REDIS_PASSWORD=

# ===== API Configuration =====
API_HOST=0.0.0.0
API_PORT=8001
API_RELOAD=true
API_DEBUG=true

# ===== Authentication =====
# CRITICAL: Generate a secure SECRET_KEY for production!
# Run: python scripts/generate_secret_key.py
# Minimum 32 characters recommended
SECRET_KEY=CHANGE_THIS_TO_A_SECURE_RANDOM_KEY_MIN_32_CHARS
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ===== Default Admin Account (Development Only) =====
# WARNING: Change these in production!
# The default admin account is only created if it doesn't exist.
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=CHANGE_THIS_IN_PRODUCTION
DEFAULT_ADMIN_EMAIL=admin@example.com

# ===== CORS Configuration =====
# In production, specify exact allowed origins (NO wildcards!)
# Use ALLOWED_ORIGINS or CORS_ORIGINS (both are supported)
# Example: CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173

# Trusted hosts for proxy headers (production only)
# TRUSTED_HOSTS=yourdomain.com,api.yourdomain.com

# ===== Logging =====
LOG_LEVEL=INFO

# ===== ML Models =====
MODEL_PATH=../../models
ONNX_MODEL_PATH=../../models/onnx

# ===== Data Retention =====
DATA_RETENTION_DAYS=365
MAX_UPLOAD_SIZE_MB=100

# ===== Rate Limiting (REQUIRED in production) =====
# Rate limiting is MANDATORY in production for security
# Set ENABLE_RATE_LIMIT=true for production
ENABLE_RATE_LIMIT=true
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_AUTH=5/minute
RATE_LIMIT_PREDICTIONS=20/minute
RATE_LIMIT_SENSOR_DATA=200/minute
# Use Redis for rate limiting in production (recommended)
# Format: redis://[password@]host:port
# RATE_LIMIT_STORAGE_URL=redis://localhost:6379
# RATE_LIMIT_STORAGE_URL=redis://:password@localhost:6379

# ===== WebSocket Rate Limiting =====
# Maximum concurrent WebSocket connections per user
WS_MAX_CONNECTIONS_PER_USER=5
# Maximum concurrent WebSocket connections per IP address
WS_MAX_CONNECTIONS_PER_IP=10
# Maximum messages per minute per WebSocket connection
WS_MAX_MESSAGES_PER_MINUTE=100

# ===== Security Logging =====
# Enable database logging for security events (optional)
# Set to true to store security events in database
ENABLE_SECURITY_EVENT_DB_LOGGING=false

# ===== Control System Integration =====
# Type: REST, MQTT, or MODBUS (default: REST for mock)
CONTROL_SYSTEM_TYPE=REST
CONTROL_SYSTEM_URL=http://localhost:8080/api/v1
CONTROL_SYSTEM_TOKEN=your-control-system-api-token
CONTROL_SYSTEM_TIMEOUT=10
# Enable control system integration (set to false for development/mock mode)
CONTROL_SYSTEM_ENABLED=false

# ===== Email Service Configuration =====
# Enable SMTP email service
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@i-drill.local
SMTP_FROM_NAME=i-Drill System
SMTP_USE_TLS=true
# Frontend URL for email links (password reset, etc.)
FRONTEND_URL=http://localhost:3001
# Email retry settings
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY=60

# ===== Security Headers Configuration =====
# Content Security Policy (CSP)
# Leave empty to use default policy, or set custom CSP
# Example: CSP_POLICY="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';"
# CSP_POLICY=

# API URL for CSP connect-src directive (production)
# Used to allow API and WebSocket connections
# API_URL=https://api.yourdomain.com

# HTTPS and HSTS Configuration
# Force HTTPS redirect (production only)
# FORCE_HTTPS=false

# HSTS (HTTP Strict Transport Security) settings
# HSTS_MAX_AGE=31536000  # 1 year in seconds
# HSTS_INCLUDE_SUBDOMAINS=true
# HSTS_PRELOAD=false  # Only enable if you plan to submit to HSTS preload list

